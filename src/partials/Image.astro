---

import { Picture } from 'astro:assets';
import getImageSize from '../helpers/getImageSize'

const { image, classes, loading } = Astro.props

const url = `${image?.filename}/m/filters:format(webp)`

const imageSize = image ? getImageSize(image.filename) : null

const width = imageSize ? imageSize[0] : null
const height = imageSize ? imageSize[1] : null

---

{ image ? <Picture src={url} formats={['avif', 'webp']} alt={image?.alt}  class={classes} {width} {height} loading={loading ? loading : "lazy"}/> : '' }